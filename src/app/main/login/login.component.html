<div class="container" [class.active]="isRegisterMode">
  <!-- 1. Login Form Box (Untouched, still template-driven) -->
  <div class="form-box login">
    <form [formGroup]="loginForm" class="space-y-4" (ngSubmit)="submit()">
      <h1 class="text-3xl font-bold">Login</h1>
      <p class="text-gray-500 text-sm">Welcome back! Sign in to continue.</p>

      <div class="input-box">
        <input type="text" placeholder="Username" required formControlName="username"
          class="w-full p-4 border border-gray-300 rounded-lg focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 outline-none text-base" />
        <i class="bx bxs-user"></i>
      </div>
      <div *ngIf="username?.invalid && username?.touched" class="mt-1 text-red-500 text-sm">
        <div *ngIf="username?.errors?.['required']">Email is required</div>
        <div *ngIf="username?.errors?.['email']">
          Please enter a valid email
        </div>
      </div>

      <div class="input-box">
        <input type="password" placeholder="Password" required formControlName="loginPass"
          class="w-full p-4 border border-gray-300 rounded-lg focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 outline-none text-base" />
        <i class="bx bxs-lock-alt"></i>
      </div>
      <div *ngIf="password?.invalid && password?.touched" class="mt-1 text-red-500 text-sm">
        <div *ngIf="password?.errors?.['required']">Password is required</div>
        <div *ngIf="password?.errors?.['minlength']">Password must be at least 4 characters</div>
      </div>

      <div class="forgot-link">
        <a href="#">Forgot Password?</a>
      </div>
      <div class="flex gap-4">

        <p> <strong>EMAIL</strong> :  www.kaiser123@gmail.com</p>
        <p> <strong>PASSWORD</strong> : 123456</p>

      </div>

      <button type="submit" class="btn">Login</button>

      <p class="text-center text-sm text-gray-500 mt-6">
        or login with social platforms
      </p>

      <div class="flex justify-center gap-4 mt-4 social-icons">
        <button
  type="button"
  (click)="loginWithGoogle($event)"
  class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-full
         text-red-500 hover:bg-red-500 hover:text-white transition duration-200">
  <i class="bx bxl-google text-xl"></i>
</button>
        <a href="#"
          class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-full text-blue-600 hover:bg-blue-600 hover:text-white transition duration-200">
          <i class="bx bxl-facebook text-xl"></i>
        </a>
        <a href="#"
          class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-full text-gray-800 hover:bg-gray-800 hover:text-white transition duration-200">
          <i class="bx bxl-github text-xl"></i>
        </a>
        <a href="#"
          class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-full text-blue-700 hover:bg-blue-700 hover:text-white transition duration-200">
          <i class="bx bxl-linkedin text-xl"></i>
        </a>
      </div>
    </form>
  </div>

  <!-- 2. Registration Form Box (UPDATED to Reactive Forms) -->
  <div class="form-box register">
    <!-- Global Messages -->
    <div *ngIf="successMessage"
      class="w-full p-3 bg-green-100 text-green-700 border border-green-300 rounded-lg mb-4 text-sm font-semibold">
      {{ successMessage }}
    </div>
    <div *ngIf="errorMessage"
      class="w-full p-3 bg-red-100 text-red-700 border border-red-300 rounded-lg mb-4 text-sm font-semibold">
      {{ errorMessage }}
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="createUser()" class="space-y-2">
      <h1 class="text-3xl font-bold">Register</h1>
      <p class="text-gray-500 text-sm">Create your new account quickly!</p>

      <!-- Name Fields -->
      <div class="flex flex-col sm:flex-row gap-4">
        <div class="input-box w-full">
          <input type="text" placeholder="First Name" formControlName="firstName"
            class="w-full p-4 border rounded-lg outline-none text-base" [class.border-red-500]="
              f['firstName'].invalid && f['firstName'].touched
            " [class.border-gray-300]="
              f['firstName'].valid || f['firstName'].untouched
            " />
          <i class="bx bxs-user"></i>
          <div *ngIf="f['firstName'].invalid && f['firstName'].touched" class="text-red-500 text-xs text-left mt-1">
            First Name is required.
          </div>
        </div>
        <div class="input-box w-full">
          <input type="text" placeholder="Last Name" formControlName="lastName"
            class="w-full p-4 border rounded-lg outline-none text-base" [class.border-red-500]="
              f['lastName'].invalid && f['lastName'].touched
            " [class.border-gray-300]="
              f['lastName'].valid || f['lastName'].untouched
            " />
          <i class="bx bxs-user-detail"></i>
          <div *ngIf="f['lastName'].invalid && f['lastName'].touched" class="text-red-500 text-xs text-left mt-1">
            Last Name is required.
          </div>
        </div>
      </div>

      <!-- Email Address -->
      <div class="input-box">
        <input type="email" placeholder="Email Address" formControlName="email"
          class="w-full p-4 border rounded-lg outline-none text-base"
          [class.border-red-500]="f['email'].invalid && f['email'].touched"
          [class.border-gray-300]="f['email'].valid || f['email'].untouched" />
        <i class="bx bxs-envelope"></i>
        <div *ngIf="f['email'].invalid && f['email'].touched" class="text-red-500 text-xs text-left mt-1">
          <span *ngIf="f['email'].errors?.['required']">Email is required.</span>
          <span *ngIf="f['email'].errors?.['email']">Must be a valid email format.</span>
        </div>
      </div>

      <!-- Password -->
      <div class="input-box">
        <input type="password" placeholder="Password" formControlName="password"
          class="w-full p-4 border rounded-lg outline-none text-base" [class.border-red-500]="
            f['password'].invalid && f['password'].touched
          " [class.border-gray-300]="
            f['password'].valid || f['password'].untouched
          " />
        <i class="bx bxs-lock-alt"></i>
        <div *ngIf="f['password'].invalid && f['password'].touched" class="text-red-500 text-xs text-left mt-1">
          <span *ngIf="f['password'].errors?.['required']">Password is required.</span>
          <span *ngIf="f['password'].errors?.['minlength']">Password must be at least 6 characters.</span>
        </div>
      </div>

      <!-- Phone & Date of Birth (Combined Row) -->
      <div class="flex flex-col sm:flex-row gap-4">
        <div class="input-box w-full">
          <input type="tel" placeholder="Phone Number (Optional)" formControlName="phoneNumber"
            class="w-full p-4 border border-gray-300 rounded-lg focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 outline-none text-base" />
          <i class="bx bxs-phone"></i>
        </div>
        <div class="input-box w-full">
          <input type="date" title="Date of Birth (Optional)" formControlName="dateOfBirth"
            class="w-full p-4 border border-gray-300 rounded-lg text-gray-500 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 outline-none text-base" />
        </div>
      </div>

      <!-- Registration Button -->
      <button type="submit" class="btn mt-4" [disabled]="isLoading">
        <span *ngIf="!isLoading">Register Account</span>
        <span *ngIf="isLoading">Processing...</span>
      </button>
    </form>

    <p class="text-center text-sm text-gray-500 mt-6">
      or register with social platforms
    </p>

    <!-- Social Icons -->
    <div class="flex justify-center gap-4 mt-4 social-icons">
   <button
  type="button"
  (click)="loginWithGoogle($event)"
  class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-full
         text-red-500 hover:bg-red-500 hover:text-white transition duration-200">
  <i class="bx bxl-google text-xl"></i>
</button>
      <a href="#"
        class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-full text-blue-600 hover:bg-blue-600 hover:text-white transition duration-200">
        <i class="bx bxl-facebook text-xl"></i>
      </a>
      <a href="#"
        class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-full text-gray-800 hover:bg-gray-800 hover:text-white transition duration-200">
        <i class="bx bxl-github text-xl"></i>
      </a>
      <a href="#"
        class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-full text-blue-700 hover:bg-blue-700 hover:text-white transition duration-200">
        <i class="bx bxl-linkedin text-xl"></i>
      </a>
    </div>
  </div>

  <!-- 3. Toggle Panel -->
  <div class="toggle-box">
    <div class="toggle-panel toggle-left">
      <h1>Hello, Welcome!</h1>
      <p>Enter your personal details to create an account with us.</p>
      <button class="btn register-btn" (click)="switchToRegister()">
        Register
      </button>
    </div>

    <div class="toggle-panel toggle-right">
      <h1>Welcome Back!</h1>
      <p>Already have an account? Login here to continue your journey.</p>
      <button class="btn login-btn" (click)="switchToLogin()">Login</button>
    </div>
  </div>
</div>
