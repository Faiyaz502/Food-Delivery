<div class="p-6 bg-gray-50 min-h-screen">
  <h1 class="text-3xl font-bold text-gray-800 text-center mb-8">Food Delivery Admin Panel</h1>

  <!-- REVIEWS SECTION -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-10">
    <!-- Review List -->
    <div class="bg-white rounded-xl shadow-md p-5">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Customer Reviews</h2>
      <div class="max-h-96 overflow-y-auto space-y-3">
        <div
          *ngFor="let review of reviews"
          (click)="selectReview(review)"
          class="p-4 border rounded-lg cursor-pointer hover:bg-blue-50 transition"
          [class.border-blue-500]="selectedReview?.id === review.id"
        >
          <div class="flex justify-between items-start">
            <div>
              <h3 class="font-medium text-gray-800">{{ review.restaurantName }}</h3>
              <p class="text-sm text-gray-500">by {{ review.userName }}</p>
            </div>
            <span class="text-xs bg-gray-200 px-2 py-1 rounded">{{ review.createdAt | date }}</span>
          </div>
          <div class="mt-2 flex items-center space-x-4">
            <span class="text-yellow-600">‚≠ê {{ review.foodRating }}/5 (Food)</span>
            <span class="text-blue-600">üöö {{ review.deliveryRating }}/5 (Delivery)</span>
          </div>
          <p class="mt-2 text-gray-700 italic">"{{ review.comment }}"</p>
        </div>
      </div>
    </div>

    <!-- Review Edit Form -->
    <div class="bg-white rounded-xl shadow-md p-5" *ngIf="selectedReview">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Edit Review #{{ selectedReview.id }}</h2>
      <form [formGroup]="reviewForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-600 mb-1">Food Rating</label>
          <input type="range" min="1" max="5" formControlName="foodRating" class="w-full" />
          <span class="text-sm text-gray-500">{{ reviewForm.get('foodRating')?.value }}/5</span>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-600 mb-1">Delivery Rating</label>
          <input type="range" min="1" max="5" formControlName="deliveryRating" class="w-full" />
          <span class="text-sm text-gray-500">{{ reviewForm.get('deliveryRating')?.value }}/5</span>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-600 mb-1">Comment</label>
          <textarea
            formControlName="comment"
            class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
            rows="3"
          ></textarea>
        </div>

        <div class="flex space-x-3 pt-2">
          <button
            type="button"
            (click)="updateReview()"
            class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
          >
            Update
          </button>
          <button
            type="button"
            (click)="deleteReview(selectedReview!.id)"
            class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition"
          >
            Delete
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- RATINGS CHART -->
  <div class="bg-white rounded-xl shadow-md p-5 mb-10">
    <h2 class="text-xl font-semibold text-gray-700 mb-4">Restaurant Ratings Overview</h2>
    <div class="w-full">
      <apx-chart
        [series]="foodRatingChartOptions.series"
        [chart]="foodRatingChartOptions.chart"
        [xaxis]="foodRatingChartOptions.xaxis"
        [yaxis]="foodRatingChartOptions.yaxis"
        [title]="foodRatingChartOptions.title"
        [dataLabels]="foodRatingChartOptions.dataLabels">
      </apx-chart>
    </div>
  </div>

  <!-- COUPONS SECTION -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Create & Validate Coupon -->
    <div class="bg-white rounded-xl shadow-md p-5">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Manage Coupons</h2>

      <!-- Create Coupon Form -->
      <form [formGroup]="couponForm" class="space-y-3 mb-6">
        <input
          formControlName="code"
          placeholder="Coupon Code"
          class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
        />
        <input
          formControlName="description"
          placeholder="Description"
          class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
        />
        <select
          formControlName="discountType"
          class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
        >
          <option [value]="DiscountType.PERCENTAGE">Percentage</option>
          <option [value]="DiscountType.FIXED">Fixed Amount</option>
        </select>
        <input
          type="number"
          formControlName="discountValue"
          placeholder="Discount Value"
          class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
        />
        <input
          type="number"
          formControlName="minOrderAmount"
          placeholder="Min Order Amount"
          class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
        />
        <input
          type="number"
          formControlName="usageLimit"
          placeholder="Usage Limit"
          class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
        />
        <div class="flex space-x-2">
          <input
            type="datetime-local"
            formControlName="validFrom"
            class="flex-1 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
          />
          <input
            type="datetime-local"
            formControlName="validUntil"
            class="flex-1 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
          />
        </div>
        <div class="flex items-center">
          <input
            type="checkbox"
            formControlName="applicableOnFirstOrder"
            class="mr-2 h-4 w-4 text-blue-600 rounded"
          />
          <label class="text-sm text-gray-600">Applicable on first order only</label>
        </div>
        <button
          type="button"
          (click)="createCoupon()"
          class="w-full py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition"
        >
          Create Coupon
        </button>
      </form>

      <!-- Validate Coupon -->
      <div class="border-t pt-4">
        <h3 class="font-medium text-gray-700 mb-2">Validate Coupon</h3>
        <div class="flex space-x-2 mb-2">
          <input
            id="validateCode"
            placeholder="Coupon Code"
            class="flex-1 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
          />
          <input
            id="validateAmount"
            type="number"
            placeholder="Order Amount"
            class="w-32 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
          />
        </div>
        <button
          (click)="validateCoupon()"
          class="w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition"
        >
          Validate
        </button>
        <div *ngIf="validationResult" class="mt-3 p-3 bg-green-50 text-green-700 rounded-md text-sm">
          <p>{{ "Valid Coupon" }}</p>
         
        </div>
          <div *ngIf="validationResult == false " class="mt-3 p-3 bg-green-50 text-red-700 rounded-md text-sm">
          <p>{{ "Invalid Coupon" }}</p>
        
        </div>
      </div>
    </div>

    <!-- Active Coupons List -->
    <div class="bg-white rounded-xl shadow-md p-5">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Active Coupons</h2>
      <div class="space-y-3 max-h-96 overflow-y-auto">
        <div *ngFor="let coupon of coupons" class="p-3 border rounded-lg">
          <div class="flex justify-between items-start">
            <div>
              <span class="font-bold text-blue-700">{{ coupon.code }}</span>
              <p class="text-sm text-gray-600">{{ coupon.description }}</p>
            </div>
            <span
              class="px-2 py-1 text-xs rounded-full"
              [class.bg-green-100.text-green-800]="coupon.isActive"
              [class.bg-red-100.text-red-800]="!coupon.isActive"
            >
              {{ coupon.isActive ? 'Active' : 'Inactive' }}
            </span>
          </div>
          <div class="mt-2 text-sm text-gray-700">
            <p>{{ coupon.discountType }}: {{ coupon.discountValue }}{{ coupon.discountType === DiscountType.PERCENTAGE ? '%' : '' }}</p>
            <p>Min Order: {{ coupon.minOrderAmount | currency }}</p>
            <p>Used: {{ coupon.usedCount }} / {{ coupon.usageLimit }}</p>
          </div>
          <div class="mt-3 flex space-x-2">
            <button
              (click)="applyCoupon(coupon.code,coupon.minOrderAmount)"
              class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200"
            >
              Apply (Test)
            </button>
            <button
              (click)="deactivateCoupon(coupon.id)"
              class="text-xs px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200"
            >
              Deactivate
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- COUPON USAGE CHART -->
  <div class="bg-white rounded-xl shadow-md p-5 mt-8">
    <h2 class="text-xl font-semibold text-gray-700 mb-4">Coupon Usage Statistics</h2>
    <div class="w-full">
      <apx-chart
        [series]="couponUsageChartOptions.series"
        [chart]="couponUsageChartOptions.chart"
        [xaxis]="couponUsageChartOptions.xaxis"
        [title]="couponUsageChartOptions.title"
        [dataLabels]="couponUsageChartOptions.dataLabels">
      </apx-chart>
    </div>
  </div>
</div>